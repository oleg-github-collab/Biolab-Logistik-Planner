/* CRITICAL MOBILE FIXES - HIGHEST PRIORITY */

@media (max-width: 768px) {
  /* FORCE visible safe areas on all iOS devices */
  body {
    padding-top: env(safe-area-inset-top, 0) !important;
  }

  /* MESSENGER - CHAT LIST HEADER - MUST BE VISIBLE */
  .chats-list-container .chats-header {
    padding-top: calc(env(safe-area-inset-top, 20px) + 1rem) !important;
    padding-bottom: 1rem !important;
    min-height: auto !important;
  }

  .chats-title {
    margin-bottom: 0.75rem !important;
    margin-top: 0 !important;
  }

  .chats-search {
    margin-bottom: 0 !important;
  }

  /* MESSENGER - CHAT HEADER - MUST BE VISIBLE */
  .messenger-container .chat-header {
    padding-top: calc(env(safe-area-inset-top, 20px) + 1rem) !important;
    padding-bottom: 1rem !important;
    min-height: auto !important;
  }

  .chat-back-btn {
    flex-shrink: 0 !important;
  }

  .chat-user-info {
    overflow: hidden !important;
  }

  /* PROFILE HEADER - MUST BE VISIBLE */
  .user-profile-container .bg-gradient-to-r,
  [class*="bg-gradient-to-r"][class*="from-blue"] {
    padding-top: calc(env(safe-area-inset-top, 20px) + 1rem) !important;
    padding-bottom: 1.5rem !important;
    min-height: auto !important;
  }

  /* STORIES - DON'T OVERLAP BUTTONS */
  .mobile-stories-container,
  [class*="stories"] {
    position: relative !important;
    top: auto !important;
    margin-top: 0 !important;
  }

  /* FORCE all containers to respect safe areas */
  .fixed,
  .sticky,
  [class*="header"],
  [class*="Header"] {
    padding-top: calc(env(safe-area-inset-top, 0) + 1rem) !important;
  }

  /* LIST SCROLLING - ENSURE BUTTONS VISIBLE */
  .chats-list {
    padding-bottom: calc(env(safe-area-inset-bottom, 20px) + 100px) !important;
  }

  /* PROFILE CONTENT SCROLLING */
  .user-profile-container .flex-1.overflow-y-auto {
    padding-bottom: calc(env(safe-area-inset-bottom, 20px) + 2rem) !important;
    min-height: 0 !important;
  }

  /* FORCE remove any negative margins */
  * {
    margin-top: max(0, var(--margin-top, 0)) !important;
  }
}

/* iOS SPECIFIC CRITICAL FIXES */
@supports (-webkit-touch-callout: none) {
  @media (max-width: 768px) {
    /* Ensure all headers are visible on notched iPhones */
    .chats-header,
    .chat-header,
    [class*="bg-gradient-to-r"] {
      padding-top: calc(env(safe-area-inset-top, 44px) + 1rem) !important;
    }

    /* Fix for iPhone notch overlap */
    body {
      padding-top: env(safe-area-inset-top, 44px) !important;
    }
  }
}
