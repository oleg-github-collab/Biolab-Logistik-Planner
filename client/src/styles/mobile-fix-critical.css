/* CRITICAL MOBILE FIXES - HIGHEST PRIORITY */

@media (max-width: 768px) {
  /* REMOVE body padding */
  body {
    padding-top: 0 !important;
  }

  /* MESSENGER - COMPACT HEADER */
  .chats-list-container .chats-header {
    padding: 0.75rem 1rem 0.875rem !important;
    padding-top: max(0.75rem, env(safe-area-inset-top)) !important;
    min-height: auto !important;
  }

  .chats-title {
    font-size: 1.25rem !important;
    margin-bottom: 0.5rem !important;
    margin-top: 0 !important;
    line-height: 1.4 !important;
  }

  .chats-search {
    margin-bottom: 0 !important;
  }

  .chats-search-input {
    padding: 0.5rem 1rem 0.5rem 2.25rem !important;
    font-size: 0.875rem !important;
    min-height: 40px !important;
  }

  .chats-search-icon {
    width: 18px !important;
    height: 18px !important;
  }

  /* MESSENGER - CHAT HEADER COMPACT */
  .messenger-container .chat-header {
    padding: 0.75rem 1rem !important;
    padding-top: max(0.75rem, env(safe-area-inset-top)) !important;
    min-height: auto !important;
  }

  .chat-back-btn {
    flex-shrink: 0 !important;
    width: 36px !important;
    height: 36px !important;
  }

  .chat-back-btn svg {
    width: 20px !important;
    height: 20px !important;
  }

  .chat-user-avatar {
    width: 36px !important;
    height: 36px !important;
    font-size: 0.875rem !important;
  }

  .chat-user-name {
    font-size: 1rem !important;
    line-height: 1.3 !important;
  }

  .chat-user-status {
    font-size: 0.75rem !important;
  }

  .chat-action-btn {
    width: 32px !important;
    height: 32px !important;
  }

  .chat-action-btn svg {
    width: 18px !important;
    height: 18px !important;
  }

  /* PROFILE HEADER COMPACT */
  .user-profile-container .bg-gradient-to-r,
  [class*="bg-gradient-to-r"][class*="from-blue"] {
    padding: 0.875rem 1rem 1.25rem !important;
    padding-top: max(0.875rem, env(safe-area-inset-top)) !important;
    min-height: auto !important;
  }

  /* Close button in profile */
  .bg-gradient-to-r .absolute.top-4.right-4,
  [class*="bg-gradient-to-r"] .absolute {
    top: max(0.75rem, env(safe-area-inset-top)) !important;
  }

  /* Profile photo smaller */
  .user-profile-container .w-24,
  .user-profile-container .h-24 {
    width: 72px !important;
    height: 72px !important;
  }

  /* Profile name smaller */
  .user-profile-container h2 {
    font-size: 1.25rem !important;
    line-height: 1.4 !important;
  }

  /* STORIES - DON'T OVERLAP */
  .mobile-stories-container,
  .bg-white.border-b {
    position: relative !important;
    top: auto !important;
    margin-top: 0 !important;
  }

  /* Stories section compact */
  .px-6.py-4.bg-white.border-b {
    padding: 0.75rem 1rem !important;
  }

  .flex.items-center.justify-between.mb-3 {
    margin-bottom: 0.5rem !important;
  }

  .flex.items-center.justify-between.mb-3 h3 {
    font-size: 0.875rem !important;
  }

  /* REMOVE всі sticky та fixed що ламають layout */
  [class*="sticky"],
  [class*="fixed"]:not(.user-profile-container):not([role="dialog"]) {
    position: relative !important;
  }

  /* LIST SCROLLING */
  .chats-list {
    padding-bottom: calc(env(safe-area-inset-bottom, 0) + 120px) !important;
  }

  /* PROFILE SCROLLING */
  .user-profile-container .flex-1.overflow-y-auto {
    padding-bottom: calc(env(safe-area-inset-bottom, 0) + 2rem) !important;
    min-height: 0 !important;
  }

  /* Tabs compact */
  .border-b.border-gray-200 button {
    padding: 0.75rem 1rem !important;
    font-size: 0.8125rem !important;
  }

  /* Content padding */
  .flex-1.overflow-y-auto.p-6 {
    padding: 1rem !important;
  }
}

/* iOS SPECIFIC - видаляємо body padding на iOS */
@supports (-webkit-touch-callout: none) {
  @media (max-width: 768px) {
    body {
      padding-top: 0 !important;
    }

    /* Компактніші хедери на iOS */
    .chats-header,
    .chat-header {
      padding-top: max(0.75rem, env(safe-area-inset-top)) !important;
    }
  }
}
