/* CRITICAL FIX: Proper scrolling for messenger desktop layout
 * DirectMessenger.js line 3532: renderDesktopLayout
 * Structure: ContactList panel (left) + messenger-container (right)
 */

@media (min-width: 1024px) {
  /* Main desktop wrapper (line 3532) */
  .flex.h-full.bg-gradient-to-br.from-slate-50 {
    height: 100% !important;
    max-height: 100% !important;
    overflow: hidden !important;
  }

  /* Left sidebar - ContactList panel (line 3534-3541) */
  .flex.h-full.bg-gradient-to-br.from-slate-50 > div:first-child {
    height: 100% !important;
    max-height: 100% !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    flex-shrink: 0 !important;
  }

  /* Right side - messenger-container (line 3544) */
  .messenger-container {
    height: 100% !important;
    max-height: 100% !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
  }

  /* Desktop header - should not scroll (line 3547) */
  .messenger-desktop-header {
    flex-shrink: 0 !important;
    position: sticky !important;
    top: 0 !important;
    z-index: 200 !important;
    visibility: visible !important;
    opacity: 1 !important;
    transform: translateZ(0);
    pointer-events: auto;
  }

  .messenger-desktop-header__actions {
    flex-shrink: 0 !important;
    visibility: visible !important;
    opacity: 1 !important;
    pointer-events: auto;
  }

  /* Messages container - ONLY THIS SCROLLS (line 3655) */
  .messenger-messages-container {
    flex: 1 !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    min-height: 0 !important;
    max-height: none !important;
  }

  /* Input container - FIXED AT BOTTOM (line 3679) */
  .messenger-input-container {
    flex-shrink: 0 !important;
    position: relative !important;
    bottom: auto !important;
    background: white !important;
    border-top: 1px solid #e2e8f0 !important;
    z-index: 10 !important;
    max-height: none !important;
  }

  /* Prevent nested max-height issues */
  .messenger-messages-container > div,
  .messenger-messages-container > * {
    max-height: none !important;
  }

  /* Ensure contact panel children can scroll */
  .contact-group__grid {
    max-height: none !important;
  }
}

/* Mobile layout - prevent white space under input */
@media (max-width: 1023px) {
  .messenger-mobile-container {
    display: flex !important;
    flex-direction: column !important;
    height: 100% !important;
    overflow: hidden !important;
  }

  .messenger-mobile-input {
    flex-shrink: 0 !important;
    position: relative !important;
  }
}
